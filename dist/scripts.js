"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,s=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,s=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function asyncGeneratorStep(t,e,n,r,o,s,a){try{var i=t[s](a),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(i){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=i.apply(t,a);function o(t){asyncGeneratorStep(r,e,n,o,s,"next",t)}function s(t){asyncGeneratorStep(r,e,n,o,s,"throw",t)}o(void 0)})}}var generateButton=document.getElementById("generate-button"),postTitle=document.getElementById("post-title"),postId=document.getElementById("post-id"),postContent=document.getElementById("post-content");function makeRequest(r,o,s){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open(r,o),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||201===n.status?t(JSON.parse(n.response)):e(JSON.parse(n.response)))},"POST"===r?(n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(s))):n.send()})}function createPost(){return _createPost.apply(this,arguments)}function _createPost(){return(_createPost=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,r,o,s,a,i,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=makeRequest("GET","https://us-central1-open-classrooms-js-for-the-web.cloudfunctions.net/widgets/generate-uid"),n=makeRequest("GET","https://us-central1-open-classrooms-js-for-the-web.cloudfunctions.net/widgets/generate-title"),r=makeRequest("GET","https://us-central1-open-classrooms-js-for-the-web.cloudfunctions.net/widgets/generate-lorem"),t.next=5,Promise.all([e,n,r]);case 5:return o=t.sent,s=_slicedToArray(o,3),a=s[0],i=s[1],c=s[2],u=makeRequest("POST","https://us-central1-open-classrooms-js-for-the-web.cloudfunctions.net/widgets/create-post-with-uid",{uid:a.uid,title:i.title,content:c.lorem}),t.next=13,u;case 13:l=t.sent,postTitle.textContent=l.post.title,postId.textContent=l.post.id,postContent.textContent=l.post.content;case 17:case"end":return t.stop()}},t)}))).apply(this,arguments)}generateButton.addEventListener("click",function(){createPost()});